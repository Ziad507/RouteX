{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}Error Logs | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">Home</a> &rsaquo; Error Logs
</div>
{% endblock %}

{% block content %}
<div class="module">
    <h1>‚ö†Ô∏è Error Logs & System Status</h1>
    
    <div style="margin: 20px 0;">
        <p><strong>Log Files Location:</strong></p>
        <ul>
            <li><code>{{ admin_log_file }}</code></li>
            <li><code>{{ errors_log_file }}</code></li>
            <li><code>{{ django_log_file }}</code></li>
        </ul>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
        <!-- Admin Errors -->
        <div class="module" style="background: #fff3cd; border: 1px solid #ffc107; border-radius: 8px; padding: 20px;">
            <h2 style="color: #856404; margin-top: 0;">üî¥ Admin Errors (Last 30)</h2>
            {% if admin_errors %}
                <div style="max-height: 400px; overflow-y: auto; background: #fff; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 11px;">
                    {% for error in admin_errors %}
                        <div style="padding: 5px; border-bottom: 1px solid #eee; white-space: pre-wrap;">{{ error }}</div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="color: #28a745;">‚úÖ No admin errors found</p>
            {% endif %}
        </div>
        
        <!-- All Errors -->
        <div class="module" style="background: #f8d7da; border: 1px solid #dc3545; border-radius: 8px; padding: 20px;">
            <h2 style="color: #721c24; margin-top: 0;">üö® All Errors (Last 50)</h2>
            {% if all_errors %}
                <div style="max-height: 400px; overflow-y: auto; background: #fff; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 11px;">
                    {% for error in all_errors %}
                        <div style="padding: 5px; border-bottom: 1px solid #eee; white-space: pre-wrap;">{{ error }}</div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="color: #28a745;">‚úÖ No errors found</p>
            {% endif %}
        </div>
    </div>
    
    <!-- Django Logs -->
    <div class="module" style="background: #d1ecf1; border: 1px solid #0c5460; border-radius: 8px; padding: 20px; margin-top: 20px;">
        <h2 style="color: #0c5460; margin-top: 0;">üìã Django Logs (Last 30)</h2>
        {% if django_logs %}
            <div style="max-height: 300px; overflow-y: auto; background: #fff; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 11px;">
                {% for log in django_logs %}
                    <div style="padding: 5px; border-bottom: 1px solid #eee; white-space: pre-wrap;">{{ log }}</div>
                {% endfor %}
            </div>
        {% else %}
            <p style="color: #28a745;">‚úÖ No logs found</p>
        {% endif %}
    </div>
    
    <div style="margin-top: 30px; padding: 15px; background: #e7f3ff; border-radius: 8px;">
        <h3>‚ÑπÔ∏è Information</h3>
        <ul>
            <li>Logs are automatically rotated when they reach 10MB</li>
            <li>Admin errors are logged to <code>admin.log</code></li>
            <li>All application errors are logged to <code>errors.log</code></li>
            <li>General Django logs are in <code>django.log</code></li>
            <li>Logs are updated in real-time as errors occur</li>
        </ul>
    </div>
</div>

<style>
    .module {
        margin-bottom: 20px;
    }
    code {
        background: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 12px;
    }
</style>
{% endblock %}

